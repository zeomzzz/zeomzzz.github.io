---
title:  "[ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° - ê¸°ë³¸í¸] 05ê°•. ì—°ê´€ê´€ê³„ ë§¤í•‘ ê¸°ì´ˆ"
excerpt: "ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ë§¤í•‘, ì—°ê´€ê´€ê³„ ì£¼ì¸ê³¼ mappedBy"

categories:
  - JPA
tags:
  - [Framework, Lecture, JPA]

toc: true
toc_sticky: true
 
date: 2023-06-18
last_modified_at: 2023-06-19
---

<br>

# **05ê°•. ì—°ê´€ê´€ê³„ ë§¤í•‘ ê¸°ì´ˆ**

<br>

## **1. ì—°ê´€ê´€ê³„ê°€ í•„ìš”í•œ ì´ìœ **

<br>

### **ê°ì²´ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ì–´ ëª¨ë¸ë§í–ˆì„ ë•Œì˜ ë¬¸ì œì **
: ê°ì²´ ê°„ ì—°ê´€ê´€ê³„ ì—†ìŒ

<br>

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/1.png ){: .align-center}

- ì°¸ì¡°í•˜ì§€ ì•Šê³  ì™¸ë˜ í‚¤ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
    
    ```java
    // Member.java
    @Entity
    public class Member {
    
    	@Id @GeneratedValue
    	private Long id;
    
    	@Column(name = "USERNAME")
    	private String name;
    
    	@Column(name = "TEAM_ID")
    	private Long teamId;
    	â€¦
    }
    
    // Team.java
    @Entity
    public class Team {
    
    	@Id @GeneratedValue
    	private Long id;
    	private String name;
     â€¦
    }
    ```
    
    ```java
    // ìƒëµ
    // ë¬¸ì œì  : ì°¸ì¡°ê°€ ì•„ë‹ˆê³  ì™¸ë˜í‚¤ ê°’ì„ ê·¸ëŒ€ë¡œ ê°€ì§€ê³  ìˆìŒ
    
    // ì €ì¥
    Team team = new Team();
    team.setName("TeamA");
    em.persist(team); // ì˜ì† ìƒíƒœê°€ ë˜ë ¤ë©´ ID ê°’ ìƒê¹€
    
    Member member = new Member();
    member.setName("member1");
    // member1ì„ TeamAì— ì†Œì†ì‹œí‚¤ì
    member.setTeamId(team.getId()); // IDê°’ ê°€ì ¸ì˜¤ê¸° : ì˜ì† ìƒíƒœ ë  ë•Œ ìƒê¸´ ID ê°’ì„ ê°€ì ¸ì˜´
    em.persist(member); // ê°ì²´ë©´ setTeamì´ì–´ì•¼ í•  ê²ƒ ê°™ì€ë° ..
    
    tx.commit();
    // ìƒëµ
    ```
    
    ì‹¤í–‰ ê²°ê³¼
    
    ```java
    // ìƒëµ : MEMBER í…Œì´ë¸”, TEAM í…Œì´ë¸” CREATE ì¿¼ë¦¬
    
    Hibernate: 
        call next value for hibernate_sequence
    Hibernate: 
        call next value for hibernate_sequence
    Hibernate: 
        /* insert hellojpa.Team
            */ insert 
            into
                Team
                (name, TEAM_ID) 
            values
                (?, ?)
    Hibernate: 
        /* insert hellojpa.Member
            */ insert 
            into
                Member
                (USERNAME, TEAM_ID, MEMBER_ID) 
            values
                (?, ?, ?)
    ```
    
    DB
    
    MEMBER
    
    | MEMBER_ID | USERNAME | TEAM_ID |
    | --- | --- | --- |
    | 2 | member1 | 1 |
    
    TEAM
    
    | TEAM_ID | NAME |
    | --- | --- |
    | 1 | TeamA |

<br>    
    
>    ğŸ’¡ **IDê°€ TEAM_IDëŠ” 1, MEMBER_IDëŠ” 2ì¸ ì´ìœ ?**
>    
>    - ë‘ ê°ì²´ê°€ ê°™ì€ Sequence ì´ìš©
>    - ë”°ë¡œ ID ê´€ë¦¬í•˜ë ¤ë©´ ë”°ë¡œ ë§Œë“¤ê³  ë§¤í•‘
    
- ì™¸ë˜ í‚¤ ì‹ë³„ìë¥¼ ì§ì ‘ ë‹¤ë£¸
    
    ```java
    //íŒ€ ì €ì¥
    Team team = new Team();
    team.setName("TeamA");
    em.persist(team);
    
    //íšŒì› ì €ì¥
    Member member = new Member();
    member.setName("member1");
    member.setTeamId(team.getId());
    em.persist(member);
    ```
    

- ì‹ë³„ìë¡œ ë‹¤ì‹œ ì¡°íšŒ : ê°ì²´ ì§€í–¥ì ì¸ ë°©ë²•ì´ ì•„ë‹˜
    
    ```java
    Member findMember = em.find(Member.class, member.getId());
    Team findTeam = em.find(Team.class, team.getId());
    // ì—°ê´€ê´€ê³„ê°€ ì—†ê¸° ë•Œë¬¸ì— ê³„ì† ë‹¤ì‹œ ì¿¼ë¦¬ë¥¼ ë³´ë‚´ì•¼ í•¨
    ```

<br>

**-> ê°ì²´ë¥¼ í…Œì´ë¸”ì— ë§ì¶”ì–´ ë°ì´í„° ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë¸ë§í•˜ë©´, í˜‘ë ¥ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤**

- í…Œì´ë¸”ê³¼ ê°ì²´ì˜ ì°¨ì´ : ì™¸ë˜í‚¤(í…Œì´ë¸”) vs. ì°¸ì¡°(ê°ì²´)
    - í…Œì´ë¸” : ì™¸ë˜ í‚¤ë¡œ ì¡°ì¸ ì‚¬ìš©í•´ì„œ ì—°ê´€ëœ í…Œì´ë¸” ì°¾ìŒ
    - ê°ì²´ : ì°¸ì¡° ì‚¬ìš©í•´ì„œ ì—°ê´€ëœ ê°ì²´ë¥¼ ì°¾ìŒ

<br>
<br>

## **2. ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„**

<br>

### **ê°ì²´ ì§€í–¥ ëª¨ë¸ë§**

<br>

- ê°ì²´ ì—°ê´€ê´€ê³„ ì‚¬ìš© : Memberì—ì„œ TeamIdê°€ ì•„ë‹ˆë¼ Teamì„ ê°€ì ¸ì˜¤ë„ë¡ ëª¨ë¸ë§

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/2.png ){: .align-center}

- ê°ì²´ì˜ ì°¸ì¡°ì™€ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ë§¤í•‘
    - `@ManyToOne`, `@OneToMany`
        
        ```java
        @Entity
        public class Member {
        
        	@Id @GeneratedValue
        	private Long id;
        
        	@Column(name = "USERNAME")
        	private String name;
        	private int age;
        
        // @Column(name = "TEAM_ID")
        // private Long teamId;
        
        	@ManyToOne // Memberê°€ Many, Teamì´ One (Member : Team = N : 1)
            @JoinColumn(name = "TEAM_ID") // Join í•´ì•¼ í•˜ëŠ” Columnì´ ë­”ì§€
        	private Team team;
        
        	// getter, setter..
        ```
        
        JpaMain.java
        
        ```java
        // ìƒëµ
        
        // ì €ì¥
        Team team = new Team();
        team.setName("TeamA");
        em.persist(team);
        
        Member member = new Member();
        member.setName("member1");
        // member1ì„ TeamAì— ì†Œì†ì‹œí‚¤ì
        member.setTeam(team); // teamì—ì„œ PKê°’ êº¼ë‚´ì„œ ì•Œì•„ì„œ FKë¡œ ì‚¬ìš©
        em.persist(member); // ê°ì²´ë©´ setTeamì´ì–´ì•¼ í•  ê²ƒ ê°™ì€ë° ..
        
        Member findMember = em.find(Member.class, member.getId());
        
        Team findTeam = findMember.getTeam();
        System.out.println("findTeam = " + findTeam.getName()); // findTeam = TeamA
        
        tx.commit();
        // ìƒëµ
        ```
        
- ORM ë§¤í•‘
    
    ![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/3.png ){: .align-center}
    
- ì—°ê´€ê´€ê³„ ì €ì¥
    
    ```java
    //íŒ€ ì €ì¥
    Team team = new Team();
    team.setName("TeamA");
    em.persist(team);
    
    //íšŒì› ì €ì¥
    Member member = new Member();
    member.setName("member1");
    member.setTeam(team); //ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ ì„¤ì •, ì°¸ì¡° ì €ì¥
    em.persist(member);
    ```
    
- ì°¸ì¡°ë¡œ ì—°ê´€ê´€ê³„ ì¡°íšŒ - ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
    
    ```java
    //ì¡°íšŒ
    Member findMember = em.find(Member.class, member.getId());
    
    //ì°¸ì¡°ë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê´€ê´€ê³„ ì¡°íšŒ
    Team findTeam = findMember.getTeam();
    ```
    
- ì—°ê´€ê´€ê³„ ìˆ˜ì •
    
    ```java
    // ìƒˆë¡œìš´ íŒ€B
    Team teamB = new Team();
    teamB.setName("TeamB");
    em.persist(teamB);
    
    // íšŒì›1ì— ìƒˆë¡œìš´ íŒ€B ì„¤ì •
    member.setTeam(teamB);
    ```
    
    - ì´ì™€ ê°™ì´ ìˆ˜ì •í•˜ë©´ DBì— ì—°ê´€ê´€ê³„ê°€ ì—…ë°ì´íŠ¸ ë¨

<br>
<br>

## **3. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì™€ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸**

<br>

### **ì–‘ë°©í–¥ ë§¤í•‘**

<br>

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/4.png ){: .align-center}

- ì§€ê¸ˆê¹Œì§€ ì‘ì„±í•œ ì½”ë“œì—ì„œ Member -> Teamì€ ê°€ëŠ¥í•˜ì§€ë§Œ Team -> MemberëŠ” ë¶ˆê°€ëŠ¥
    
    -> ì–‘ë°©í–¥ ë§¤í•‘ì„ í•˜ë©´ ê°€ëŠ¥í•´ì§
    
    | ëŒ€ìƒ | ë°©ë²• |
    | --- | --- |
    | í…Œì´ë¸” | ì™¸ë˜í‚¤ë¡œ Join |
    | ê°ì²´ | Team -> Member ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ Teamì— membersë¼ëŠ” List ë„£ì–´ì¤Œ |

- ì—”í‹°í‹°ì— í•„ìš”í•œ ì»¬ë ‰ì…˜ì„ ì¶”ê°€
    - Member ì—”í‹°í‹°ëŠ” ë‹¨ë°©í–¥ê³¼ ë™ì¼, Team ì—”í‹°í‹°ëŠ” ì»¬ë ‰ì…˜ ì¶”ê°€
    
    -> ì—­ë°©í–¥ ì¡°íšŒ ê°€ëŠ¥
    
    ```java
    @Entity
    public class Member {
    
    	@Id @GeneratedValue
    	private Long id;
    
    	@Column(name = "USERNAME")
    	private String name;
    	private int age;
    
    	@ManyToOne
    	@JoinColumn(name = "TEAM_ID")
    	private Team team;
    ```
    
    ```java
    @Entity
    public class Team {
    
    	@Id @GeneratedValue
    	private Long id;
    	private String name;
    
    	@OneToMany(mappedBy = "team")
    	List<Member> members = new ArrayList<Member>();
    	â€¦
     }
    ```
    
    ```java
    //ì¡°íšŒ
    Team findTeam = em.find(Team.class, team.getId());
    int memberSize = findTeam.getMembers().size(); //ì—­ë°©í–¥ ì¡°íšŒ
    ```
    
<br>
<br>

### **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ê³¼ mappedBy**

<br>

#### **ê°ì²´ì™€ í…Œì´ë¸”ì´ ê´€ê³„ë¥¼ ë§ºëŠ” ì°¨ì´**

<br>

| ëŒ€ìƒ | ì„¤ëª… |
| --- | --- |
| ê°ì²´ | - ì—°ê´€ê´€ê³„ 2ê°œ : íšŒì› -> íŒ€ ì—°ê´€ê´€ê³„ 1ê°œ(ë‹¨ë°©í–¥) / íŒ€ -> íšŒì› ì—°ê´€ê´€ê³„ 1ê°œ(ë‹¨ë°©í–¥) <br> -> ì–‘ìª½ì— ì°¸ì¡°ê°€ í•„ìš”í•¨ |
| í…Œì´ë¸” | - ì—°ê´€ê´€ê³„ 1ê°œ : íšŒì› <-> íŒ€ì˜ ì—°ê´€ê´€ê³„ 1ê°œ(ì–‘ë°©í–¥)<br> -> Foreign Key í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ì–‘ìª½ ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥ |

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/5.png ){: .align-center}

<br>

(1) ê°ì²´ì˜ ì–‘ë°©í–¥ ê´€ê³„

<br>

- ì‚¬ì‹¤ ì–‘ë°©í–¥ ê´€ê³„ê°€ ì•„ë‹Œ ì„œë¡œ ë‹¤ë¥¸ ë‹¨ë±¡í–¥ ê´€ê³„ 2ê°œ
- ê°ì²´ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°í•˜ë ¤ë©´ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ 2ê°œ ë§Œë“¤ì–´ì•¼ í•¨
    - A -> B (a.getB()) / B -> A (b.getA())

```java
class A {
	B b;
}

class B {
	A a;
}
```

<br>

(2) í…Œì´ë¸”ì˜ ì–‘ë°©í–¥ ê´€ê³„

<br>

- í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬
- MEMBER.TEAM_ID ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ê°€ì§ (ì–‘ìª½ìœ¼ë¡œ Join)

```java
SELECT *
FROM MEMBER M
JOIN TEAM T ON M.TEAM_ID = T.TEAM_ID

SELECT *
FROM TEAM T
JOIN MEMBER M ON T.TEAM_ID = M.TEAM_ID
```

<br>
<br>

### **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸(Owner)**

<br>

- ì°¸ì¡° ë‘ ê°€ì§€ ì¤‘ í•˜ë‚˜ë¡œ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬í•´ì•¼ í•¨ -> ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸!
    
    ex. Team team ë˜ëŠ” List members
    

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/5.png ){: .align-center}

<br>
<br>

#### **ì–‘ë°©í–¥ ë§¤í•‘ ê·œì¹™**

<br>

- ê°ì²´ì˜ ë‘ ê´€ê³„ì¤‘ í•˜ë‚˜ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì§€ì •
- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ë§Œì´ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬(ë“±ë¡, ìˆ˜ì •)
- **â­ï¸ ì£¼ì¸ì´ ì•„ë‹Œìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥**
- ì£¼ì¸ì€ `mappedBy` ì†ì„± ì‚¬ìš©X, ì£¼ì¸ì´ ì•„ë‹ˆë©´ `mappedBy` ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •

<br>
<br>

#### **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ ì •í•˜ê¸°**

<br>

- ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ìˆëŠ” ê³³
    - 1:N ê´€ê³„ì—ì„œ Nìª½(`@ManyToOne`)

ex. ì—¬ê¸°ì„œëŠ” Member.teamì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸

![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/6.png ){: .align-center}


> ğŸš¨ **ì£¼ì˜ : ì–‘ë°©í–¥ ë§¤í•‘í•  ë•Œ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜**
>
>- ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•˜ì§€ ì•ŠìŒ
>    
>    ```java
>    Team team = new Team();
>    team.setName("TeamA");
>    
>    em.persist(team);
>    Member member = new Member();
>    member.setName("member1");
>    
>    //ì—­ë°©í–¥(ì£¼ì¸ì´ ì•„ë‹Œ ë°©í–¥)ë§Œ ì—°ê´€ê´€ê³„ ì„¤ì •
>    team.getMembers().add(member);
>    
>    em.persist(member);
>    ```
>    
>    - ì–‘ë°©í–¥ ë§¤í•‘ì‹œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ì„ ì…ë ¥í•´ì•¼ í•¨ (ìˆœìˆ˜í•œ ê°ì²´ ê´€ê³„ë¥¼ ê³ ë ¤í•˜ë©´ í•­ìƒ ì–‘ ìª½ ë‹¤ ê°’ì„ ì…ë ¥í•´ì•¼ í•œë‹¤.)
>        
>        ```java
>        Team team = new Team();
>        team.setName("TeamA");
>        em.persist(team);
>        
>        Member member = new Member();
>        member.setName("member1");
>        
>        team.getMembers().add(member);
>        
>        //ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì— ê°’ ì„¤ì •
>        member.setTeam(team); //**
>        
>        em.persist(member);
>        ```
>        
>    - ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì€ ê²½ìš°ì˜ ë¬¸ì œì 
>        
>        JpaMain.java
>        
>        ```java
>        // ìƒëµ
>        Member member = new Member();
>        member.setName("member1");
>        em.persist(member);
>        
>        Team team = new Team();
>        team.setName("TeamA");
>        team.getMembers().add(member);
>        em.persist(team);
>        
>        em.flush(); // 1ì°¨ ìºì‹œê°€ ì•„ë‹Œ DBì—ì„œ ê°’ì„ ê°€ì ¸ì˜¤ë„ë¡
>        em.clear();
>        
>        tx.commit();
>        // ìƒëµ
>        ```
>        
>        ì‹¤í–‰ ê²°ê³¼
>        
>        ```java
>        Hibernate: 
>            /* insert hellojpa.Member
>                */ insert 
>                into
>                    Member
>                    (USERNAME, TEAM_ID, MEMBER_ID) 
>                values
>                    (?, ?, ?)
>        Hibernate: 
>            /* insert hellojpa.Team
>                */ insert 
>                into
>                    Team
>                    (name, TEAM_ID) 
>                values
>                    (?, ?)
>        ```
>        
>        DB : TEAM_IDê°€ null
>        
>        ![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/6.png ){: .align-center}
>        
>        - ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ Team teamì´ê¸° ë•Œë¬¸ì—, teamì˜ membersëŠ” ì½ê¸°ë§Œ ê°€ëŠ¥(mappedBy)
>            
>            -> setTeam í•´ì¤˜ì•¼ í•¨
>            
>        
>        JpaMain.java
>        
>        ```java
>        // ìƒëµ
>        Team team = new Team();
>        team.setName("TeamA");
>        em.persist(team);
>        
>        Member member = new Member();
>        member.setName("member1");
>        member.setTeam(team);
>        em.persist(member);
>        
>        team.getMembers().add(member);
>        
>        em.flush();
>        em.clear();
>        
>        tx.commit();
>        // ìƒëµ
>        ```
>        
>        ì‹¤í–‰ ê²°ê³¼
>        
>        ```java
>        Hibernate: 
>            /* insert hellojpa.Team
>                */ insert 
>                into
>                    Team
>                    (name, TEAM_ID) 
>                values
>                    (?, ?)
>        Hibernate: 
>            /* insert hellojpa.Member
>                */ insert 
>                into
>                    Member
>                    (USERNAME, TEAM_ID, MEMBER_ID) 
>                values
>                    (?, ?, ?)
>        ```
>        
>        DB : TEAM_IDê°€ ì…ë ¥ë˜ì–´ìˆìŒ
>        
>        ![]({{ site.url }}{{ site.baseurl }}/assets/images/jpa/lecture/orm/05/7.png ){: .align-center}
>
>- ì–‘ë°©í–¥ ë§¤í•‘í•  ë•ŒëŠ” ê°€ê¸‰ì  ì–‘ìª½ì— ë‹¤ ê°’ì„ ë„£ì–´ì£¼ì (ì‹¤ìˆ˜ ë°©ì§€)
>    
>    JpaMain.java
>    
>    ```java
>    // ìƒëµ
>    
>    Team team = new Team();
>    team.setName("TeamA");
>    em.persist(team);
>    
>    Member member = new Member();
>    member.setName("member1");
>    member.setTeam(team);
>    em.persist(member);
>    
>    //team.getMembers().add(member); // Listì— ê°’ ì„¸íŒ… ì•ˆí•¨
>    
>    em.flush();
>    em.clear();
>    
>    Team findTeam = em.find(Team.class, team.getId());
>    List<Member> members = findTeam.getMembers();
>    for (Member m : members) {
>           System.out.println("m = " + m.getName());
>    }
>    
>    tx.commit();
>    // ìƒëµ
>    ```
>    
>    ì‹¤í–‰ ê²°ê³¼ : FKë¥¼ ì´ìš©í•˜ì—¬ ì—°ê´€ëœ ê°’ì„ ê°€ì ¸ì˜´
>    
>    ```java
>    Hibernate: 
>        /* insert hellojpa.Team
>            */ insert 
>            into
>                Team
>                (name, TEAM_ID) 
>            values
>                (?, ?)
>    Hibernate: 
>        /* insert hellojpa.Member
>            */ insert 
>            into
>                Member
>                (USERNAME, TEAM_ID, MEMBER_ID) 
>            values
>                (?, ?, ?)
>    Hibernate: 
>        select
>            team0_.TEAM_ID as TEAM_ID1_1_0_,
>            team0_.name as name2_1_0_ 
>        from
>            Team team0_ 
>        where
>            team0_.TEAM_ID=?
>    Hibernate: 
>        select
>            members0_.TEAM_ID as TEAM_ID3_0_0_,
>            members0_.MEMBER_ID as MEMBER_I1_0_0_,
>            members0_.MEMBER_ID as MEMBER_I1_0_1_,
>            members0_.USERNAME as USERNAME2_0_1_,
>            members0_.TEAM_ID as TEAM_ID3_0_1_ 
>        from
>            Member members0_ 
>        where
>            members0_.TEAM_ID=?
>    m = member1
>    ```
>    
>    - ê·¸ëŸ°ë° Listê°’ ì„¸íŒ…í•˜ì§€ ì•Šìœ¼ë©´ ë‘ ê°€ì§€ ë¬¸ì œê°€ ë°œìƒ
>        1. flush, clear í•˜ì§€ ì•ŠëŠ” ê²½ìš° : 1ì°¨ ìºì‹œì—ë§Œ ìˆëŠ” ê°’ì€ ê°€ì ¸ì˜¤ì§€ ëª»í•¨
>            
>            JpaMain.java
>            
>            ```java
>            // ìƒëµ
>            
>            Team team = new Team();
>            team.setName("TeamA");
>            em.persist(team);
>            
>            Member member = new Member();
>            member.setName("member1");
>            member.setTeam(team);
>            em.persist(member);
>            
>            //team.getMembers().add(member);
>            
>            //em.flush();
>            //em.clear();
>            
>            Team findTeam = em.find(Team.class, team.getId()); // 1ì°¨ ìºì‹œì— ìˆìŒ
>            List<Member> members = findTeam.getMembers();
>            
>            System.out.println("=================");
>            for (Member m : members) {
>                System.out.println("m = " + m.getName());
>            }
>            System.out.println("=================");
>            
>            tx.commit();
>            // ìƒëµ
>            ```
>            
>            ì‹¤í–‰ê²°ê³¼
>            
>            ```java
>            =================
>            =================
>            Hibernate: 
>                /* insert hellojpa.Team
>                    */ insert 
>                    into
>                        Team
>                        (name, TEAM_ID) 
>                    values
>                        (?, ?)
>            Hibernate: 
>                /* insert hellojpa.Member
>                    */ insert 
>                    into
>                        Member
>                        (USERNAME, TEAM_ID, MEMBER_ID) 
>                    values
>                        (?, ?, ?)
>            ```
>            
>
>2.  tc ì‘ì„±í•  ë•Œ : Jpa ì‚¬ìš©í•˜ì§€ ì•Šê³  Javaë¡œë§Œ í…ŒìŠ¤íŠ¸

<br>
<br>

### **ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì£¼ì˜ ì‚¬í•­**

<br>

- ìˆœìˆ˜ ê°ì²´ ìƒíƒœë¥¼ ê³ ë ¤í•´ì„œ í•­ìƒ ì–‘ìª½ì— ê°’ì„ ì„¤ì •
- ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ ìƒì„±
    
    ex. Team ë˜ëŠ” Memberì— ì—°ê´€ê´€ê³„ ë©”ì„œë“œë¥¼ ìƒì„±
    
    Member.java : Memberì— ìƒì„±í•œ ê²½ìš°
    
    ```java
    @Entity
    public class Member {
    
        @Id @GeneratedValue
        @Column(name = "MEMBER_ID")
        private Long id;
    
        @Column(name = "USERNAME")
        private String name;
    
        @ManyToOne // Memberê°€ Many, Teamì´ One (Member : Team = N : 1)
        @JoinColumn(name = "TEAM_ID") // Join í•´ì•¼ í•˜ëŠ” Columnì´ ë­”ì§€
        private Team team;
    
        // getter, setter
        public Long getId() {
            return id;
        }
    
        public void setId(Long id) {
            this.id = id;
        }
    
        public String getName() {
            return name;
        }
    
        public void setName(String name) {
            this.name = name;
        }
    
        public Team getTeam() {
            return team;
        }
    
        public void changeTeam(Team team) { // setterë¥¼ ìˆ˜ì •í•˜ê¸°ë³´ë‹¤ëŠ” ìƒˆë¡œ ë§Œë“¤ê¸°
            this.team = team;
            team.getMembers().add(this);
        }
    
    }
    ```
    
    Team.java : Teamì— ë§Œë“œëŠ” ê²½ìš°
    
    ```java
    public void addMember(Member member) {
    	member.setTeam(this);
    	members.add(member);
    }
    ```
    
- ë¬´í•œ ë£¨í”„ ë°œìƒ ì£¼ì˜ : toString(), lombok, JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬
    - toString()
        
        Member.javaì˜ toString()
        
        ```java
        @Override
            public String toString() {
                return "Member{" +
                        "id=" + id +
                        ", name='" + name + '\'' +
                        ", team=" + team + // team.toString()ì„ í˜¸ì¶œ
                        '}';
            }
        ```
        
        Team.javaì˜ toString()
        
        ```java
        @Override
            public String toString() {
                return "Team{" +
                        "id=" + id +
                        ", name='" + name + '\'' +
                        ", members=" + members + // ê° memberì˜ toString() ëª¨ë‘ í˜¸ì¶œ
                        '}';
            }
        ```
        
    - lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ toString ìƒì„±ì‹œ ì£¼ì˜ -> ê°€ëŠ¥í•˜ë©´ lombokì—ì„œ toString ìƒì„± ì‚¬ìš©í•˜ì§€ ì•Šê¸°
    - JSON ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬
        - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì—”í‹°í‹°ë¥¼ ì§ì ‘ responseë¡œ ë³´ë‚´ë©´ ì—”í‹°í‹°ë¥¼ jsonìœ¼ë¡œ ë°”ê¿€ ë•Œ ê³„ì† ë˜ íŒŒê³  ë“¤ì–´ê°€ì„œ ì¥ì•  ë°œìƒ
        - ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì—”í‹°í‹° ë°˜í™˜í•˜ì§€ ë§ê³ , ê°€ëŠ¥í•˜ë©´ DTOë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•˜ê¸°
            
>ğŸš¨ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì—”í‹°í‹° ë°˜í™˜í•˜ëŠ” ê²½ìš°ì˜ ë¬¸ì œì 
>            
>1. ë¬´í•œ ë£¨í”„ ë°œìƒ
>2. ì—”í‹°í‹°ê°€ ë³€ê²½ë  ê°€ëŠ¥ì„±
            
<br>