---
title:  "[ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° - ê¸°ë³¸í¸] 04ê°•. ì—”í‹°í‹° ë§¤í•‘"
excerpt: "ìˆ˜ê°• ì¤‘"

categories:
  - JPA
tags:
  - [Framework, Lecture, JPA]

toc: true
toc_sticky: true
 
date: 2023-06-11
last_modified_at: 2023-06-12
---

<br>

# **04ê°•. ì—”í‹°í‹° ë§¤í•‘**

<br>

## **0. ì—”í‹°í‹° ë§¤í•‘ ì†Œê°œ**

<br>

- ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘: `@Entity`, `@Table`
- í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘: `@Column`
- ê¸°ë³¸ í‚¤ ë§¤í•‘: `@Id`
- ì—°ê´€ê´€ê³„ ë§¤í•‘: `@ManyToOne`, `@JoinColumn`
    - ex. íšŒì› - ì†Œì† íŒ€ ì—°ê´€ ê´€ê³„ ë§¤í•‘
    - 1:1, 1:N ..

<br>

## **1. ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘**

<br>

### **@Entity**

<br>

- `@Entity`ê°€ ë¶™ì€ í´ë˜ìŠ¤ : JPAê°€ ê´€ë¦¬í•˜ëŠ” ì—”í‹°í‹°(í•„ìˆ˜)
    - ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” í´ë˜ìŠ¤
    - ì—†ìœ¼ë©´ JPAì™€ ê´€ë ¨ ì—†ìŒ


> ğŸš¨ **ì£¼ì˜**
>
>- ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜ (íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” public ë˜ëŠ” protected ìƒì„±ì)
>    - JPA êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í•„ìš”
>- final í´ë˜ìŠ¤, enum, interface, inner í´ë˜ìŠ¤ ì‚¬ìš©X
>- DBì— ì €ì¥í•  í•„ë“œì— final ì‚¬ìš© X

<br>
<br>

### **@Table**

<br>

- `@Table` : ì—”í‹°í‹°ì™€ ë§¤í•‘í•  í…Œì´ë¸” ì§€ì •


| ì†ì„± | ê¸°ëŠ¥ | ê¸°ë³¸ê°’ |
| --- | --- | --- |
| name | ë§¤í•‘í•  í…Œì´ë¸” ì´ë¦„ | ì—”í‹°í‹° ì´ë¦„ ê·¸ëŒ€ë¡œ ì‚¬ìš© <br> (ê°™ì€ í´ë˜ìŠ¤ ì´ë¦„ ì—†ìœ¼ë©´ ê°€ê¸‰ì  ê¸°ë³¸ê°’ ì‚¬ìš©) |
| catalog | ë°ì´í„°ë² ì´ìŠ¤ catalog ë§¤í•‘ |  |
| schema | ë°ì´í„°ë² ì´ìŠ¤ schema ë§¤í•‘ |  |
| uniqueConstraints (DDL) | DDL ìƒì„± ì‹œì— ìœ ë‹ˆí¬ ì œì•½ ì¡°ê±´ ìƒì„± |  |

- name : ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì§€ì •í•˜ê³  ì‹¶ì€ ê²½ìš°
    
    ```java
    @Entity
    @Table(name = "MBR") // MBR í…Œì´ë¸”ê³¼ ë§¤í•‘
    public class Member {
    	...
    }
    ```

<br>    

## **2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±**

<br>

### **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±**

<br>

- í…Œì´ë¸” ì¤‘ì‹¬ -> ê°ì²´ ì¤‘ì‹¬
- DDLì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ìë™ ìƒì„± (CREATE)
    - ê°ì²´ ë§¤í•‘ ì•Œì•„ì„œ í•´ì¤Œ!
- ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸ì„ í™œìš©í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ë§ëŠ” ì ì ˆí•œ DDL ìƒì„±
- ì´ë ‡ê²Œ ìƒì„±ëœ DDLì€ ê°œë°œ ì¥ë¹„ì—ì„œë§Œ ì‚¬ìš©
    - ìš´ì˜ì„œë²„ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜, í•„ìš”í•˜ë‹¤ë©´ ì ì ˆíˆ ë‹¤ë“¬ì€ í›„ ì‚¬ìš©

<br>

#### **1) ì†ì„±**

<br>

- `hibernate.hbm2ddl.auto`

| ì˜µì…˜ | ì„¤ëª… |
| --- | --- |
| create | - ê¸°ì¡´í…Œì´ë¸” ì‚­ì œ í›„ ìƒì„± (DROP + CREATE) |
| create-drop | - createì™€ ê°™ìœ¼ë‚˜ ì¢…ë£Œì‹œì ì— í…Œì´ë¸” DROP <br> - ë³´í†µ TC ì‹¤í–‰í•´ë³¼ ë•Œ, ë§ˆì§€ë§‰ì— ì§€ìš°ê¸° ìœ„í•´ ì‚¬ìš© |
| update | - ë³€ê²½ë¶„ë§Œ ë°˜ì˜(ìš´ì˜DBì—ëŠ” ì‚¬ìš©í•˜ë©´ ì•ˆë¨) <br> - í…Œì´ë¸” ë³€ê²½í•˜ëŠ”ë° Drop í•˜ì§€ ì•Šê³  Alter í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© <br> - ì‚­ì œëŠ” ì•ˆë˜ê³  ì¶”ê°€ë§Œ ê°€ëŠ¥ |
| validate | - ì—”í‹°í‹°ì™€ í…Œì´ë¸”ì´ ì •ìƒ ë§¤í•‘ë˜ì—ˆëŠ”ì§€ë§Œ í™•ì¸ |
| none | - ì†ì„±ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ |

<br>

ex. create

persistence.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.2"
             xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd">
    <persistence-unit name="hello">
        <properties>
            <!-- í•„ìˆ˜ ì†ì„± -->
            <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <!-- ì˜µì…˜ -->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            <property name="hibernate.jdbc.batch_size" value="10"/>
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>
    </persistence-unit>
</persistence>
```

Member.java

```java
package hellojpa;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Member {

    @Id // PK
    private long id;
    private String name;
    private int age;

    // ìƒì„±ì (ê¸°ë³¸ ìƒì„±ì ê¼­!!)
    // ìƒëµ

    // getter, setter
    // ìƒëµ
}
```

JpaMain.java ì‹¤í–‰ ê²°ê³¼ : Drop Table í›„ì— Create Table + DBì— ë°ì´í„° ì—†ëŠ” ë¹ˆ í…Œì´ë¸” ìƒì„±ë¨

```java
Hibernate: 
    
    drop table Member if exists

Hibernate: 
    
    create table Member (
       id bigint not null,
        age integer not null,
        name varchar(255),
        primary key (id)
    )
```

ex. update

persistence.xml

```java
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.2"
             xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd">
    <persistence-unit name="hello">
        <properties>
            <!-- í•„ìˆ˜ ì†ì„± -->
            <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <!-- ì˜µì…˜ -->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            <property name="hibernate.jdbc.batch_size" value="10"/>
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>
</persistence>
```

Member.java

```java
package hellojpa;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Member {

    @Id // PK
    private long id;
    private String name;

    // ìƒì„±ì (ê¸°ë³¸ ìƒì„±ì ê¼­!!)
    // ìƒëµ

    // getter, setter
    // ìƒëµ
}
```

ì‹¤í–‰ ê²°ê³¼

```java
Hibernate: 
    
    create table Member (
       id bigint not null,
        name varchar(255),
        primary key (id)
    )
```

Member.javaì— age ì¶”ê°€ í›„ ë‹¤ì‹œ ì‹¤í–‰

Member.java

```java
package hellojpa;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Member {

    @Id // PK
    private long id;
    private String name;
		private int age;

    // ìƒì„±ì (ê¸°ë³¸ ìƒì„±ì ê¼­!!)
    // ìƒëµ

    // getter, setter
    // ìƒëµ
}
```

ì‹¤í–‰ ê²°ê³¼ : age columnë§Œ alter

```java
Hibernate: 
    
    alter table Member 
       add column age integer not null
```

ex. validate

persistence.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.2"
             xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd">
    <persistence-unit name="hello">
        <properties>
            <!-- í•„ìˆ˜ ì†ì„± -->
            <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
            <property name="javax.persistence.jdbc.user" value="sa"/>
            <property name="javax.persistence.jdbc.password" value=""/>
            <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <!-- ì˜µì…˜ -->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            <property name="hibernate.jdbc.batch_size" value="10"/>
            <property name="hibernate.hbm2ddl.auto" value="validate" />
        </properties>
    </persistence-unit>
</persistence>
```

Member.java

```java
package hellojpa;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Member {

    @Id // PK
    private long id;
    private String name;
		private int gogo; // tableì— ì—†ëŠ” ì»¬ëŸ¼

    // ìƒì„±ì (ê¸°ë³¸ ìƒì„±ì ê¼­!!)
    // ìƒëµ

    // getter, setter
    // ìƒëµ
}
```

ì‹¤í–‰ ê²°ê³¼(ì—ëŸ¬)

```xml
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [gogo] in table [Member]
```

<br>

#### **2) ì‹¤ìŠµ**

<br>

- ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±í•˜ê¸° ì„¤ì •
- ìŠ¤í‚¤ë§ˆ ìë™ìƒì„±í•˜ê¸° ì‹¤í–‰, ì˜µì…˜ë³„ í™•ì¸
- ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸ ë³„ë¡œ ë‹¬ë¼ì§€ëŠ” ê²ƒ í™•ì¸(varchar)
    
    ex. Oracle
    
    persistence.xml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.2"
                 xmlns="http://xmlns.jcp.org/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd">
        <persistence-unit name="hello">
            <properties>
                <!-- í•„ìˆ˜ ì†ì„± -->
                <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
                <property name="javax.persistence.jdbc.user" value="sa"/>
                <property name="javax.persistence.jdbc.password" value=""/>
                <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/test"/>
                <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle12cDialect"/>
                <!-- ì˜µì…˜ -->
                <property name="hibernate.show_sql" value="true"/>
                <property name="hibernate.format_sql" value="true"/>
                <property name="hibernate.use_sql_comments" value="true"/>
                <property name="hibernate.jdbc.batch_size" value="10"/>
                <property name="hibernate.hbm2ddl.auto" value="create" />
            </properties>
        </persistence-unit>
    </persistence>
    ```
    
    ì‹¤í–‰ê²°ê³¼ : varchar2 : Oracle ë°©ì–¸
    
    ```xml
    Hibernate: 
        
        create table Member (
           id number(19,0) not null,
            gogo number(10,0) not null,
            name varchar2(255 char),
            primary key (id)
        )
    ```
    

>ğŸš¨ **ì£¼ì˜**
>
>- ìš´ì˜ ì¥ë¹„ì—ëŠ” ì ˆëŒ€ create, create-drop, update ì‚¬ìš©í•˜ë©´ ì•ˆë¨!!!
>- ê°œë°œ ì´ˆê¸° ë‹¨ê³„ëŠ” create ë˜ëŠ” update
>- í…ŒìŠ¤íŠ¸ ì„œë²„ëŠ” update ë˜ëŠ” validate
>- ìŠ¤í…Œì´ì§•ê³¼ ìš´ì˜ ì„œë²„ëŠ” validate ë˜ëŠ” none
>- í˜¼ì ì“°ëŠ” ë¡œì»¬ PC ì•„ë‹ˆë©´ ê°€ê¸‰ì ì´ë©´ ì‚¬ìš©í•˜ì§€ ë§ê¸° : í•„ìš”í•˜ë©´ ì§ì ‘ script ì¨ì¨ í…ŒìŠ¤íŠ¸

<br>

### **DDL ìƒì„± ê¸°ëŠ¥**

<br>

- ì œì•½ì¡°ê±´ ì¶”ê°€: íšŒì› ì´ë¦„ì€ í•„ìˆ˜, 10ì ì´ˆê³¼X
    - `@Column(nullable = false, length = 10)`
    
    ex. 
    
    Member.java
    
    ```java
    package hellojpa;
    
    import javax.persistence.Column;
    import javax.persistence.Entity;
    import javax.persistence.Id;
    
    @Entity
    public class Member {
    
        @Id // PK
        private long id;
        @Column(unique = true, length = 10)
        private String name;
        private int age;
    
    }
    ```
    
    ì‹¤í–‰ ê²°ê³¼
    
    ```java
    Hibernate: 
        
        create table Member (
           id bigint not null,
            age integer not null,
            name varchar(10),
            primary key (id)
        )
    Hibernate: 
        
        alter table Member 
           add constraint UK_ektea7vp6e3low620iewuxhlq unique (name)
    ```
    
- ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ ì¶”ê°€
    - `@Table(uniqueConstraints = {@UniqueConstraint( name = "NAME_AGE_UNIQUE", columnNames = {"NAME", "AGE"})})`
- DDL ìƒì„± ê¸°ëŠ¥ì€ DDLì„ ìë™ ìƒì„±í•  ë•Œë§Œ ì‚¬ìš©ë˜ê³  JPAì˜ ì‹¤í–‰ ë¡œì§ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤

<br>

## **3. í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘**

<br>

### **ì˜ˆì œ. ìš”êµ¬ì‚¬í•­ ì¶”ê°€**

<br>

1. íšŒì›ì€ ì¼ë°˜ íšŒì›ê³¼ ê´€ë¦¬ìë¡œ êµ¬ë¶„í•´ì•¼ í•œë‹¤.
2. íšŒì› ê°€ì…ì¼ê³¼ ìˆ˜ì •ì¼ì´ ìˆì–´ì•¼ í•œë‹¤.
3. íšŒì›ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” í•„ë“œê°€ ìˆì–´ì•¼ í•œë‹¤. ì´ í•„ë“œëŠ” ê¸¸ì´ ì œí•œì´ ì—†ë‹¤.

<br>

Member.java

```java
package hellojpa;

import javax.persistence.*;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.Date;

@Entity
public class Member {

    @Id // PK ì§€ì •
    private Long id;

    @Column(name = "name") // DBì—ì„œëŠ” nameê³¼ ë§¤í•‘
    private String username;
    private Integer age;

    @Enumerated(EnumType.STRING) // javaì—ëŠ” EnumTypeì´ ìˆëŠ”ë° DBì—ëŠ” ì—†ìŒ -> @Enumerated
    private RoleType roleType;

    @Temporal(TemporalType.TIMESTAMP) // ë‚ ì§œ íƒ€ì…ì€ @Temporal
    private Date createdDate;

    @Temporal(TemporalType.TIMESTAMP)
    private Date lastModifiedDate;

    @Lob // VARCHARë¥¼ ë„˜ëŠ” í° ì»¨í…ì¸ . ì´ ë•Œ ë¬¸ìíƒ€ì…ì´ë©´ clobìœ¼ë¡œ ìƒì„±ë¨
    private String description;

    public Member() {}

    //Getter, Setterâ€¦
}
```

<br>

RoleType.java

```java
package hellojpa;

public enum RoleType {
    USER, ADMIN
}
```

<br>

ì‹¤í–‰ê²°ê³¼

```java
Hibernate: 
    
    create table Member (
       id bigint not null,
        age integer,
        createdDate timestamp,
        description clob,
        lastModifiedDate timestamp,
        roleType varchar(255),
        name varchar(255),
        primary key (id)
    )
```

<br>
<br>

### **ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜ ì •ë¦¬**

- `hibernate.hbm2ddl.auto`

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… |
| --- | --- |
| @Column | ì»¬ëŸ¼ ë§¤í•‘ |
| @Temporal | ë‚ ì§œ íƒ€ì… ë§¤í•‘ |
| @Enumerated | enum íƒ€ì… ë§¤í•‘ |
| @Lob | BLOB, CLOB ë§¤í•‘ |
| @Transient | íŠ¹ì • í•„ë“œë¥¼ ì»¬ëŸ¼ì— ë§¤í•‘í•˜ì§€ ì•ŠìŒ <br> (ë§¤í•‘ ë¬´ì‹œ, DBì™€ ê´€ê³„ ì—†ê³  ë©”ëª¨ë¦¬ì—ì„œë§Œ ì‚¬ìš©) |

<br>


>ğŸ’¡ **Temporal : DATE, TIME, TIMESTAMP**
>
>- ë‚ ì§œ íƒ€ì…ì€ `@Temporal`
>- Javaì˜ ë‚ ì§œ íƒ€ì…ì€ ë‚ ì§œ+ì‹œê°„ í¬í•¨ë˜ì–´ìˆì§€ë§Œ, DBì—ì„œëŠ” ì´ë¥¼ êµ¬ë¶„í•´ì„œ ì‚¬ìš©
>    - Date : ë‚ ì§œ / Time : ì‹œê°„ / Timestamp : ë‚ ì§œ + ì‹œê°„

<br>
<br>

### **@Column**

<br>

| ì†ì„± | ì„¤ëª… | ê¸°ë³¸ê°’ |
| --- | --- | --- |
| name | - í•„ë“œì™€ ë§¤í•‘í•  í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì´ë¦„ | ê°ì²´ì˜ í•„ë“œ ì´ë¦„ |
| insertable, updatable | - ë“±ë¡(insert), ë³€ê²½(update) ê°€ëŠ¥ ì—¬ë¶€ | TRUE |
| â­ï¸ nullable(DDL) | - null ê°’ì˜ í—ˆìš© ì—¬ë¶€ë¥¼ ì„¤ì • <br> - false : DDL ìƒì„± ì‹œì— not null ì œì•½ì¡°ê±´ |  |
| unique(DDL) | - `@Table`ì˜ uniqueConstraintsì™€ ê°™ì§€ë§Œ í•œ ì»¬ëŸ¼ì— ê°„ë‹¨íˆ ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ì„ ê±¸ ë•Œ <br> - ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ. ì œì•½ì¡°ê±´ ì´ë¦„ì´ ëœë¤ìœ¼ë¡œ ìƒì„±ë˜ì–´ ìš´ì˜ì‹œì— í™œìš© ì–´ë µê¸° ë•Œë¬¸. ë³´í†µ `@Table`ì—ì„œ ì œì•½ì¡°ê±´ ì´ë¦„ê¹Œì§€ ì„¤ì • |  |
| columnDefinition(DDL) | - ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ ì •ë³´ë¥¼ ì§ì ‘ ì¤„ ë•Œ <br> - ì‘ì„±í•œ ë‚´ìš©ì´ ê·¸ëŒ€ë¡œ DDLì— ë“¤ì–´ê°
ex) varchar(100) default â€˜EMPTYâ€™ | í•„ë“œì˜ ìë°” íƒ€ì…ê³¼ ë°©ì–¸ ì •ë³´ë¥¼ ì‚¬ìš©í•´ |
| length(DDL) | - ë¬¸ì ê¸¸ì´ ì œì•½ì¡°ê±´, String íƒ€ì…ì—ë§Œ ì‚¬ìš© | 255 |
| precision, scale(DDL) | - BigDecimal, BigInteger íƒ€ì…ì—ì„œ ì‚¬ìš© <br> - precision : ì†Œìˆ˜ì ì„ í¬í•¨í•œ ì „ì²´ ìë¦¿ìˆ˜ <br> scale : ì†Œìˆ˜ì˜ ìë¦¿ìˆ˜ <br> - double, float íƒ€ì…ì—ëŠ” ì ìš©ë˜ì§€ ì•Šê³ , ì•„ì£¼ í° ìˆ«ìë‚˜ ì •ë°€í•œ ì†Œìˆ˜ë¥¼ ë‹¤ë£¨ì–´ì•¼ í•  ë•Œë§Œ ì‚¬ìš© | precision=19, scale=2 |

<br>
<br>

### **@Enumerated**

<br>

- ìë°” enum íƒ€ì…ì„ ë§¤í•‘í•  ë•Œ ì‚¬ìš©

| ì†ì„± | ì„¤ëª… | ê¸°ë³¸ê°’ |
| --- | --- | --- |
| value | â€¢ EnumType.ORDINAL: enum ìˆœì„œë¥¼ DBì— ì €ì¥ <br> â€¢ EnumType.STRING: enum ì´ë¦„ì„ DBì— ì €ì¥ | EnumType.ORDINAL |


>**ğŸš¨ enumì—ì„œ ORDINAL ì‚¬ìš©X ë¬´ì¡°ê±´ STRING !!!**
>
>- enumì´ ìˆ˜ì •ë˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ìŒ
>
>ex.
>
>Member.java
>
>```java
>package hellojpa;
>
>import javax.persistence.*;
>import java.time.LocalDate;
>import java.time.LocalDateTime;
>import java.util.Date;
>
>@Entity
>public class Member {
>
>    @Id
>    private Long id;
>
>    @Column(name = "name", nullable = false) // DBì—ì„œëŠ” nameê³¼ ë§¤í•‘
>    private String username;
>    private Integer age;
>
>    @Enumerated(EnumType.ORDINAL)
>    private RoleType roleType;
>
>    @Temporal(TemporalType.TIMESTAMP)
>    private Date createdDate;
>
>    @Temporal(TemporalType.TIMESTAMP)
>    private Date lastModifiedDate;
>
>    @Lob
>    private String description;
>
>    public Member() {}
>
>    //Getter, Setterâ€¦ (ìƒëµ(í•„ìˆ˜))
>}
>```
>
>RoleType.java : enum íƒ€ì…
>
>```java
>package hellojpa;
>
>public enum RoleType {
>    USER, ADMIN
>}
>```
>
>ì‹¤í–‰í•˜ì—¬ (Id, Username, RoleType) = (1L, â€œAâ€, USER), (2L, â€œBâ€, ADMIN) ë‘ í–‰ ë„£ìŒ
>
>DBì—ëŠ”
>
>| ID | AGE | CREATEDATE | DESCRIPTION | LASTMODIFIEDDATE | ROLETYPE | NAME |
>| --- | --- | --- | --- | --- | --- | --- |
> 2 | null | null | null | null | 1 | B |
>| 1 | null | null | null | null | 0 | A |
>
>RoleType.javaì— GUEST ì¶”ê°€
>
>RoleType.java
>
>```java
>package hellojpa;
>
>public enum RoleType {
>    GUEST, USER, ADMIN
>}
>```
>
>ì‹¤í–‰í•˜ì—¬ (Id, Username, RoleType) = (3L, â€œCâ€, GUEST) ì¶”ê°€í•˜ë©´..
>
>ì‹¤í–‰ ê²°ê³¼ DB
>
>| ID | AGE | CREATEDATE | DESCRIPTION | LASTMODIFIEDDATE | ROLETYPE | NAME |
> --- | --- | --- | --- | --- | --- | --- |
>| 3 | null | null | null | null | 0 | C |
>| 2 | null | null | null | null | 1 | B |
>| 1 | null | null | null | null | 0 | A |
>
>-> Id 3ê³¼ 1ì˜ RoleTypeì€ ë‹¤ë¦„ì—ë„ ê°™ì€ 0ìœ¼ë¡œ ì €ì¥ë¨ (ë³€ê²½ ì‚¬í•­ì´ ì ìš©ë˜ì§€ ì•ŠìŒ)

<br>
<br>

### **@Temporal**

<br>

- ë‚ ì§œ íƒ€ì…(java.util.Date, java.util.Calendar)ì„ ë§¤í•‘í•  ë•Œ ì‚¬ìš©
    
    
    | ì†ì„± | ì„¤ëª… | ê¸°ë³¸ê°’ |
    | --- | --- | --- |
    | value | - TemporalType.DATE: ë‚ ì§œ, ë°ì´í„°ë² ì´ìŠ¤ date íƒ€ì…ê³¼ ë§¤í•‘ (ì˜ˆ: 2013â€“10-11) <br> - TemporalType.TIME: ì‹œê°„, ë°ì´í„°ë² ì´ìŠ¤ time íƒ€ì…ê³¼ ë§¤í•‘ (ì˜ˆ: 11:11:11) <br> - TemporalType.TIMESTAMP: ë‚ ì§œì™€ ì‹œê°„, ë°ì´í„°ë² ì´ìŠ¤ timestamp íƒ€ì…ê³¼ ë§¤í•‘(ì˜ˆ: 2013â€“10â€“11 11:11:11) |  |

<br>

>ğŸ’¡ LocalDate, LocalDateTimeì„ ì‚¬ìš©í•  ë•ŒëŠ” ìƒëµ ê°€ëŠ¥(ìµœì‹  í•˜ì´ë²„ë„¤ì´íŠ¸ ì§€ì›) - Java 8 ë¶€í„°
>
>- LocalDate : ë…„ì›”ê¹Œì§€ë§Œ
>- LocalDateTime : ë…„ì›”ì‹œê°„ê¹Œì§€
>
>ex.
>
>```java
>private LocalDate testLocalDate; // -> DBì— date ë¡œ ìƒì„±
>private LocalDateTime testLocalDateTime; // DBì— timestampë¡œ ìƒì„±
>```

<br>
<br>

### **@Lob**

<br>

- `@Lob`ì—ëŠ” ì§€ì •í•  ìˆ˜ ìˆëŠ” ì†ì„±ì´ ì—†ìŒ
- ë§¤í•‘í•˜ëŠ” í•„ë“œ íƒ€ì…ì´ ë¬¸ìë©´ CLOB ë§¤í•‘, ë‚˜ë¨¸ì§€ëŠ” BLOB ë§¤í•‘
    
    
    | ë§¤í•‘ íƒ€ì… | ìƒì„¸ |
    | --- | --- |
    | CLOB | String, char[], java.sql.CLOB |
    | BLOB | byte[], java.sql. BLOB |

<br>
<br>

### **@Transient**

<br>

- í•„ë“œ ë§¤í•‘X
- ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥X, ì¡°íšŒX
- ì£¼ë¡œ ë©”ëª¨ë¦¬ìƒì—ì„œë§Œ ì„ì‹œë¡œ ì–´ë–¤ ê°’ì„ ë³´ê´€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

```java
@Transient
private Integer temp;
```
